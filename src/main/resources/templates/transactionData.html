<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>layUi入门</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <link rel="stylesheet" href="../css/theme9.css">

    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]-->
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>

    <!--    <link rel="stylesheet" href="../lib/layui/css/layui.css">-->

    <!--    static\lib\layuimini\lib\layui-v2.5.5\css\layui.css-->
    <!--    static\lib\layuimini\css\public.css-->
    <!--    static\lib\layuimini\lib\layui-v2.5.5\layui.js-->
    <!--    static\lib\layuimini\js\lay-config.js-->
    <link rel="stylesheet" href="../lib/layuimini/lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="../lib/layuimini/css/public.css" media="all">
    <script src="../lib/layuimini/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
    <script src="../lib/layuimini/js/lay-config.js?v=1.0.4" charset="utf-8"></script>

    <!--工具条-->
    <script type="text/html" id="userToolBar">
        <br/>
        <form class="layui-form layui-col-space5">
            <div class="layui-inline layui-show-xs-block">
                <label class="layui-form-label layui-bg-green" style="width: 110px;text-align: center">交易日期</label>

                <div class="layui-inline layui-show-xs-block">
                    <input class="layui-input"  autocomplete="off" placeholder="请输入交易日期" name="dateTime" id="end">
                </div>
            </div>
            <div class="layui-inline layui-show-xs-block">
                <label class="layui-form-label layui-bg-green" style="width: 110px;text-align: center">证券代码</label>

                <div class="layui-inline layui-show-xs-block">
                    <input class="layui-input" placeholder="请输入证券代码"  name="securitiesName" id="equityId">
                </div>
            </div>
            <div class="layui-inline layui-show-xs-block">
                <button class="layui-btn"  lay-submit="" lay-event="search" lay-filter="sreach"><i class="layui-icon">&#xe615;</i>搜索</button>
            </div>
        </form>
        <br>
        <div class="layui-btn-container"
             style="position: absolute; right: 120px; top: 10px;">
            <button class="layui-btn layui-btn-sm layui-btn-normal"
                    lay-event="add">
                <i class="layui-icon">&#xe654;</i>添加交易数据
            </button>
            <button class="layui-btn layui-btn-sm layui-btn-normal" lay-event="deleteAll"><i
                    class="layui-icon">&#xe640;</i>批量删除
            </button>
            <br>
            <button class="layui-btn layui-btn-sm layui-btn"
                    lay-event="shangHai">
                <i class="layui-icon">&#xe67c;</i>上海过户库数据导入
            </button>
            <button class="layui-btn layui-btn-sm layui-btn"
                    lay-event="shenZen">
                <i class="layui-icon">&#xe67c;</i>深圳回报库数据导入
            </button>
        </div>
    </script>




</head>
<body style="overflow: auto; background-color: white;"
      class="layui-view-body layui-content">
<div>
    <!--表格-->
    <table id="userTable" lay-filter="userTable"></table>
    <!--工具条-->
    <div style="display: none;" id="barDemo">
        <a class="layui-btn layui-btn-xs" lay-event="edit"><i
                class="layui-icon">&#xe642;</i>编辑</a>
        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i
                class="layui-icon">&#xe640;</i>删除</a>

    </div>
</div>



<!--增加的div内容-->
<div id="addContent" style="display: none; height: 100%; width:100%; text-align: center">
    <form id="addform" lay-filter="addform" class="layui-form layui-col-space5" style="margin: 50px auto; display: inline-block;">
        <div>
            <input type="hidden" name="fundId" id="fundId" th:value="${session.fundId}">
            <input type="hidden" name="transactionDataId">
            <input type="hidden" name="securitiesId" id="securitiesId">
            <input type="hidden" name="fundId">
            <input type="hidden" name="fundName">
            <input type="hidden" name="accountId" id="accountId">
            <input type="hidden" name="brokersId" id="brokersId">
            <input type="hidden" name="seateId" id="seateId">
            <input type="hidden" name="blankName">
            <input type="hidden" name="transactionDataDesc">
            <input type="hidden" name="seateRate" id="seateRate1">
            <input type="hidden" name="securitiesType1" id="securitiesType1">
            <input type="hidden" name="exchange1" id="exchange1">
        </div>

        <div class="layui-inline layui-show-xs-block" style="text-align: center;">
            <label class="layui-form-label layui-bg-green" style="text-align: center">证券编号</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="证券ID" name="securitiesName" id="securitiesName">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">账户编号</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="账户ID" name="accountName" id="accountName">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">券商名称</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="券商ID" name="brokersName" id="brokersName">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">席位名称</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="席位ID" name="seateName" id="seateName">
            </div>
        </div>
        <br>
        <br>

        <div class="grid-demo grid-demo-bg1">
            <div class="layui-form-item" >
                <label class="layui-form-label layui-bg-green" style="text-align: center">交易方式</label>
                <div class="layui-input-inline">
                    <select name="transactionDataMode" lay-verify="required" id="transactionDataMode" onblur="myNum()">
                        <option value="1">买入</option>
                        <option value="2">卖出</option>
                        <option value="3">分红</option>
                        <option value="4">送股</option>
                    </select>
                </div>
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">成交日期</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入成交日期" name="dateTime" id="dateTime">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易价格</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入交易价格" name="price" id="price" >
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">结算日期</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入结算日期" name="settlementDate" id="settlementDate">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易数量</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入交易数量" name="num" id="num" onblur="myNum()">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">结算金额</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入结算金额" name="totalSum" id="totalSum">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block" style="text-align: center">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易金额</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入交易金额" name="netReceipts" id="netReceipts">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">佣金费用</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入佣金费用" name="commission" id="commission" >
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">过户费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入过户费" name="transfer" id="transferFee1">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">印花税</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入印花税" name="stamp" id="stampDuty1">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">征管费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入征管费" name="management" id="collectionRate1">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">经手费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入经手费" name="brokerage" id="brokerage1">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">证券利息</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入证券利息" name="security" id="security1">
            </div>
        </div>

        <div style="position: absolute; left: 39%; top: 650px">
            <button class="layui-btn" lay-submit="" lay-filter="addsubmit">
                <i class="layui-icon">&#x1005;</i>添加
            </button>
            <button class="layui-btn layui-bg-red cancel" type="button" onclick="myclose()">
                <i class="layui-icon">&#x1006;</i>取消
            </button>
        </div>
    </form>
</div>



<!--修改的div内容-->
<div id="editContent"
     style="display: none; height: 100%; height: 100%; text-align: center;">
    <form id="editform" lay-filter="editform" class="layui-form layui-form-pane" style="margin: 30px auto; display: inline-block;">
        <div>
            <input type="hidden" name="transactionDataId">
            <input type="hidden" name="securitiesId" id="securitiesId2">
            <input type="hidden" name="fundId">
            <input type="hidden" name="fundName">
            <input type="hidden" name="accountId" id="accountId2">
            <input type="hidden" name="brokersId" id="brokersId2">
            <input type="hidden" name="seateId" id="seateId2">
            <input type="hidden" name="blankName">
            <input type="hidden" name="transactionDataDesc">

            <input type="hidden" name="seateRate2" id="seateRate2">
            <input type="hidden" name="securitiesType2" id="securitiesType2">
            <input type="hidden" name="exchange2" id="exchange2">
        </div>

        <div class="layui-inline layui-show-xs-block" style="text-align: center;">
            <label class="layui-form-label layui-bg-green" style="text-align: center">证券编号</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="证券ID" name="securitiesName" id="securitiesName2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">账户编号</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="账户ID" name="accountName" id="accountName2">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">券商名称</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="券商ID" name="brokersName" id="brokersName2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">席位名称</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="席位ID" name="seateName" id="seateName2">
            </div>
        </div>
        <br>
        <br>

        <div class="grid-demo grid-demo-bg1">
            <div class="layui-form-item" >
                <label class="layui-form-label layui-bg-green" style="text-align: center">交易方式</label>
                <div class="layui-input-inline">
                    <select name="transactionDataMode" lay-verify="required" id="transactionDataMode2">
                        <option value="1">买入</option>
                        <option value="2">卖出</option>
                        <option value="3">分红</option>
                        <option value="4">送股</option>
                    </select>
                </div>
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">成交日期</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入成交日期" name="dateTime" id="dateTime1">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易价格</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入交易价格" name="price" id="price2" >
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">结算日期</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入结算日期" name="settlementDate" id="settlementDate1">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易数量</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入交易数量" name="num" id="num2" onblur="myNum2()">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">结算金额</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入结算金额" name="totalSum" id="totalSum2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block" style="text-align: center">
            <label class="layui-form-label layui-bg-green" style="text-align: center">交易金额</label>
            <div class="layui-inline layui-show-xs-block">
                <input class="layui-input" placeholder="请输入交易金额" name="netReceipts" id="netReceipts2" >
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">佣金费用</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入佣金费用" name="commission" id="commission2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">过户费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入过户费" name="transfer" id="transfer2">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">印花税</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入印花税" name="stamp" id="stamp2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">征管费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入征管费" name="management" id="management2">
            </div>
        </div>
        <br>
        <br>
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">经手费</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入经手费" name="brokerage" id="brokerage2">
            </div>
        </div>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <div class="layui-inline layui-show-xs-block">
            <label class="layui-form-label layui-bg-green" style="text-align: center">证券利息</label>
            <div class="layui-inline layui-show-xs-block" style="width: 182px">
                <input class="layui-input" placeholder="请输入证券利息" name="security" id="security2">
            </div>
        </div>

        <div style="position: absolute;  left: 39%; top: 550px">
            <button class="layui-btn" lay-submit="" lay-filter="editsubmit">
                <i class="layui-icon">&#x1005;</i>修改
            </button>
            <button class="layui-btn layui-bg-red cancel" type="button" onclick="myclose()">
                <i class="layui-icon">&#x1006;</i>取消
            </button>
        </div>
    </form>
</div>
<script src="../js/transactionData.js"></script>
<script type="text/javascript">
    layui.use(['table', 'form', 'tableSelect'], function () {
        var $ = layui.jquery,
            table = layui.table,
            form = layui.form,
            tableSelect = layui.tableSelect;

        //新增证券下拉表单
        tableSelect.render({
            elem: '#securitiesName'
            , checkedKey: 'securitiesName'
            , table: {
                url: '../Securities/selectSecurities'
                , cellMinWidth: 60
                , cols: [
                    [
                        {type: 'checkbox'},
                        {field: 'securitiesId', title: '证券id'},
                        {field: 'securitiesName', title: '证券名称'},
                        {
                            field: 'securitiesType', title: '证券类型', templet: function (item) {
                                if (item.securitiesType == '1') {
                                    return '债券';
                                } else if (item.securitiesType == '2') {
                                    return '股票';
                                }
                            }
                        },
                        {
                            field: 'securitiesType', title: '证券地址', templet: function (item) {
                                if (item.securitiesType == '1') {
                                    return '上交所';
                                } else if (item.securitiesType == '2') {
                                    return '深交所';
                                }
                            }
                        }
                    ]
                ]
            }
            , done: function (elem, data) {
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.securitiesName);
                    $("#securitiesId").val(item.securitiesId);
                })
                elem.val(NEWJSON.join(","));

            }
        });

        //新增现金账户下拉表单
        tableSelect.render({
            elem: '#accountName'
            , checkedKey: 'accountName'
            , table: {
                url: '../account/selectAccount'
                , cellMinWidth: 60
                , cols: [
                    [
                        {type: 'checkbox'},
                        {field: 'accountId', title: '账户编号'},
                        {field: 'accountName', title: '账户名称'}
                    ]
                ]
            }
            , done: function (elem, data) {
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.accountName);
                    $("#accountId").val(item.accountId);
                })
                elem.val(NEWJSON.join(","));

            }
        });
        //新增券商下拉表单
        tableSelect.render({
            elem:'#brokersName'
            ,checkedKey:'brokersName'
            ,table:{
                url:'../selectBrokers'
                ,cellMinWidth: 60
                ,cols:[
                    [
                        {type:'checkbox'},
                        {field:'brokersId',title:'券商编号'},
                        {field: 'brokersName',title:'券商名称'},
                        {field: 'brokersInstructions',title:'券商描述'}
                    ]
                ]
            }
            ,done:function (elem,data) {
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.brokersName);
                    $("#brokersId").val(item.brokersId);
                });
                elem.val(NEWJSON.join(","));
                //新增席位名称下拉表单
                tableSelect.render({
                    elem: '#seateName'
                    , checkedKey:'seateName'
                    , table: {
                        url: '../seateSelect?brokersId=' + $("#brokersId").val()
                        , cellMinWidth: 60
                        , cols: [
                            [
                                {type: 'checkbox'},
                                {field: 'seateId', title: '席位编号'},
                                {field: 'seateName', title: '席位名称'},
                                {field: 'seateRate', title: '佣金利率'},
                                {field: 'brokersId', title: '券商名称'},
                                {
                                    field: 'seateAddress', title: '地址', templet: function (item) {
                                        if (item.seateAddress == '1') {
                                            return '上交所';
                                        } else if (item.seateAddress == '2') {
                                            return '深交所';
                                        }
                                    }
                                }

                            ]
                        ]
                    }
                    , done: function (elem, data) {
                        var NEWJSON = [];
                        layui.each(data.data, function (index, item) {
                            NEWJSON.push(item.seateName);
                            $("#seateRate1").val(item.seateRate);
                        })
                        elem.val(NEWJSON.join(","));

                    }
                });
            }
            })
        //修改证券下拉表单
        tableSelect.render({
            elem: '#securitiesName2'
            , checkedKey:'securitiesId'
            , table: {
                url: '../Securities/selectSecurities'
                , cellMinWidth: 60
                , cols: [
                    [
                        {type: 'checkbox'},
                        {field: 'securitiesId', title: '证券id'},
                        {field: 'securitiesName', title: '证券名称'},
                        {
                            field: 'securitiesType', title: '证券类型', templet: function (item) {
                                if (item.securitiesType == '1') {
                                    return '债券';
                                } else if (item.securitiesType == '2') {
                                    return '股票';
                                }
                            }
                        },
                        {
                            field: 'securitiesType', title: '证券地址', templet: function (item) {
                                if (item.securitiesType == '1') {
                                    return '上交所';
                                } else if (item.securitiesType == '2') {
                                    return '深交所';
                                }
                            }
                        }
                    ]
                ]
            }
            , done: function (elem, data) {
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.securitiesName);
                    $("#securitiesId2").val(item.securitiesId);
                })
                elem.val(NEWJSON.join(","));

            }
        });

        //修改现金账户下拉表单
        tableSelect.render({
            elem: '#accountName2'
            , checkedKey: 'accountId'
            , table: {
                url: '../account/selectAccount'
                , cellMinWidth: 60
                , cols: [
                    [
                        {type: 'checkbox'},
                        {field: 'accountId', title: '账户编号'},
                        {field: 'accountName', title: '账户名称'}
                    ]
                ]
            }
            , done: function (elem, data) {
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.accountName);
                    $("#accountId2").val(item.accountId);
                })
                elem.val(NEWJSON.join(","));

            }
        });
        //修改券商下拉表单
        tableSelect.render({
            elem:'#brokersName2'
            ,checkedKey:'brokersName'
            ,table:{
                url:'../selectBrokers'
                ,cellMinWidth: 60
                ,cols:[
                    [
                        {type:'checkbox'},
                        {field:'brokersId',title:'券商编号'},
                        {field: 'brokersName',title:'券商名称'},
                        {field: 'brokersInstructions',title:'券商描述'}
                    ]
                ]
            }
            ,done:function (elem,data) {
                // alert("选中的数据：" + data);
                var NEWJSON = [];
                layui.each(data.data, function (index, item) {
                    NEWJSON.push(item.brokersName);
                    $("#brokersId2").val(item.brokersId);
                });
                elem.val(NEWJSON.join(","));
                //修改席位名称下拉表单
                tableSelect.render({
                    elem: '#seateName2'
                    , checkedKey: 'seateName'
                    , table: {
                        url: '../seateSelect?brokersId=' + $("#brokersId").val()
                        , cellMinWidth: 60
                        , cols: [
                            [
                                {type: 'checkbox'},
                                {field: 'seateId', title: '席位编号'},
                                {field: 'seateName', title: '席位名称'},
                                {field: 'seateRate', title: '佣金利率'},
                                {field: 'brokersId', title: '券商名称'},
                                {
                                    field: 'seateAddress', title: '地址', templet: function (item) {
                                        if (item.seateAddress == '1') {
                                            return '上交所';
                                        } else if (item.seateAddress == '2') {
                                            return '深交所';
                                        }
                                    }
                                }

                            ]
                        ]
                    }
                    , done: function (elem, data) {
                        var NEWJSON = [];
                        layui.each(data.data, function (index, item) {
                            NEWJSON.push(item.seateName);
                            $("#seateId2").val(item.seateId);
                        })
                        elem.val(NEWJSON.join(","));

                    }
                });
            }
        })

    });
    //添加
    function myNum() {
        layui.use(['layer'], function () {
            var $ = layui.$;
            //交易金额 = 数量*价格
            var num = document.getElementById("num").value;
            var price = document.getElementById("price").value;
            var netReceipts = Number(num) * Number(price);
            $("#netReceipts").val(netReceipts);

            //佣金费用 = 交易金额*席位佣金利率
            var seateRate1=document.getElementById("seateRate1").value;
            var netReceipts1=document.getElementById("netReceipts").value;
            var commission=Number(seateRate1)*Number(netReceipts1);
            $("#commission").val(commission);

            var securitiesId =document.getElementById("securitiesId").value;
            var securitiesType1=document.getElementById("securitiesType1").value;
            var exchange1=document.getElementById("exchange1").value;

            $.post("../varietiesRate/selectVarietiesRate", {exchangeName: exchange1,rateType: securitiesType1,page:1,limit:1},function(obj){
                $.each(obj.data,function (index,item) {
                    $('#stampDuty1').val(item.stampDuty);
                    $('#transferFee1').val(item.transferFee);
                    $('#collectionRate1').val(item.collectionRate);
                    $('#brokerage1').val(item.brokerage);
                    //证券利息：股票和债券都属于证券
                    //股票没有利息，债券利息就是债券
                    var parRate=0;
                    var bondRateAmount=0;
                    var lixiday=0;
                    //获取债券信息表里的数据
                    $.post("../selectBond", {securitiesId: securitiesId,drawStartDate: '',page:1,limit:1},function(obj2) {
                        $.each(obj.data,function (index2,item2){
                            // 每天利息: 票面利率/365*票面金额*数量*1
                            //票面利率
                            parRate = item2.parRate;
                            //票面金额
                            bondRateAmount = item2.bondRateAmount;
                        })
                    })
                    //当天应收债券利息
                    lixiday = parRate/365*bondRateAmount*num*1;
                    // alert(lixiday)
                    //股票没有利息
                    if (item.rateType==2){

                        $('#security1').val(lixiday);
                    }else{
                        $('#security1').val(lixiday);
                    }
                    //买入
                    if ($('#transactionDataMode').val()==1){
                        $('#totalSum').val(netReceipts+commission+item.stampDuty
                            +item.transferFee+item.collectionRate+item.brokerage+lixiday);
                        //卖出
                    }else if($('#transactionDataMode').val()==2){
                        $('#totalSum').val(netReceipts-(commission+item.stampDuty
                            +item.transferFee+item.collectionRate+item.brokerage)+lixiday);
                    }
                })

            });
        })
    }



    //修改
    function myNum2() {
        layui.use(['layer'], function () {
            var $ = layui.$;
            //交易金额 = 数量*价格
            var num2 = document.getElementById("num2").value;
            var price2 = document.getElementById("price2").value;
            var netReceipts2 = Number(num2) * Number(price2);
            $("#netReceipts2").val(netReceipts2);

            //佣金费用 = 交易金额*席位佣金利率
            var seateRate2=document.getElementById("seateRate2").value;
            var netReceipts2=document.getElementById("netReceipts2").value;
            var commission2=Number(seateRate2)*Number(netReceipts2);
            $("#commission2").val(commission2);
            //securitiesId
            var securitiesId2 =document.getElementById("securitiesId2").value;
            var securitiesType2=document.getElementById("securitiesType2").value;
            var exchange2=document.getElementById("exchange1").value;

            $.post("../varietiesRate/selectVarietiesRate", {exchangeName: exchange2,rateType: securitiesType2,page:1,limit:1},function(obj){
                $.each(obj.data,function (index,item) {
                    $('#transfer2').val(item.stampDuty);
                    $('#stamp2').val(item.transferFee);
                    $('#management2').val(item.collectionRate);
                    $('#brokerage2').val(item.brokerage);
                    //证券利息：股票和债券都属于证券
                    //股票没有利息，债券利息就是债券
                    var parRate2=0;
                    var bondRateAmount2=0;
                    var lixiday=0;
                    $.post("../selectBond", {securitiesId: securitiesId2,drawStartDate: '',page:1,limit:1},function(obj2) {
                        $.each(obj.data,function (index2,item2){
                            //  票面利率/365*票面金额*数量*1
                            //票面利率
                            parRate2 = item2.parRate;
                            //票面金额
                            bondRateAmount2 = item2.bondRateAmount;
                        })
                    })
                    //当天应收债券利息
                    lixiday = parRate2/365*bondRateAmount2*num2*1;
                    // alert(lixiday)
                    //股票没有利息
                    if (item.rateType==2){
                        $('#security2').val(lixiday);
                    }else{
                        $('#security2').val(lixiday);
                    }
                    //买入
                    if ($('#transactionDataMode2').val()==1){
                        $('#totalSum2').val(netReceipts2+commission2+item.stampDuty
                            +item.transferFee+item.collectionRate+item.brokerage+lixiday);
                        //卖出
                    }else if($('#transactionDataMode2').val()==2){
                        $('#totalSum2').val(netReceipts2-(commission2+item.stampDuty
                            +item.transferFee+item.collectionRate+item.brokerage)+lixiday);
                    }
                })

            });
        })
    }
</script>
</body>
</html>
